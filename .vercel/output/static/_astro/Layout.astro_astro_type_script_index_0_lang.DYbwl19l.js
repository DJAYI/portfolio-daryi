import{g as E}from"./index.DKtf60Sy.js";import{S as L}from"./ScrollTrigger.BWsqEc1I.js";function j(o,t,e){return Math.max(o,Math.min(t,e))}class ot{constructor(){this.isRunning=!1,this.value=0,this.from=0,this.to=0,this.duration=0,this.currentTime=0}advance(t){var e;if(!this.isRunning)return;let s=!1;if(this.duration&&this.easing){this.currentTime+=t;const i=j(0,this.currentTime/this.duration,1);s=i>=1;const n=s?1:this.easing(i);this.value=this.from+(this.to-this.from)*n}else this.lerp?(this.value=(function(n,l,r,a){return(function(u,p,g){return(1-g)*u+g*p})(n,l,1-Math.exp(-r*a))})(this.value,this.to,60*this.lerp,t),Math.round(this.value)===this.to&&(this.value=this.to,s=!0)):(this.value=this.to,s=!0);s&&this.stop(),(e=this.onUpdate)===null||e===void 0||e.call(this,this.value,s)}stop(){this.isRunning=!1}fromTo(t,e,{lerp:s,duration:i,easing:n,onStart:l,onUpdate:r}){this.from=this.value=t,this.to=e,this.lerp=s,this.duration=i,this.easing=n,this.currentTime=0,this.isRunning=!0,l?.(),this.onUpdate=r}}class nt{constructor({wrapper:t,content:e,autoResize:s=!0,debounce:i=250}={}){this.width=0,this.height=0,this.scrollWidth=0,this.scrollHeight=0,this.resize=()=>{this.onWrapperResize(),this.onContentResize()},this.onWrapperResize=()=>{this.wrapper===window?(this.width=window.innerWidth,this.height=window.innerHeight):this.wrapper instanceof HTMLElement&&(this.width=this.wrapper.clientWidth,this.height=this.wrapper.clientHeight)},this.onContentResize=()=>{this.wrapper===window?(this.scrollHeight=this.content.scrollHeight,this.scrollWidth=this.content.scrollWidth):this.wrapper instanceof HTMLElement&&(this.scrollHeight=this.wrapper.scrollHeight,this.scrollWidth=this.wrapper.scrollWidth)},this.wrapper=t,this.content=e,s&&(this.debouncedResize=(function(l,r){let a;return function(){let c=arguments,u=this;clearTimeout(a),a=setTimeout((function(){l.apply(u,c)}),r)}})(this.resize,i),this.wrapper===window?window.addEventListener("resize",this.debouncedResize,!1):(this.wrapperResizeObserver=new ResizeObserver(this.debouncedResize),this.wrapperResizeObserver.observe(this.wrapper)),this.contentResizeObserver=new ResizeObserver(this.debouncedResize),this.contentResizeObserver.observe(this.content)),this.resize()}destroy(){var t,e;(t=this.wrapperResizeObserver)===null||t===void 0||t.disconnect(),(e=this.contentResizeObserver)===null||e===void 0||e.disconnect(),window.removeEventListener("resize",this.debouncedResize,!1)}get limit(){return{x:this.scrollWidth-this.width,y:this.scrollHeight-this.height}}}class G{constructor(){this.events={}}emit(t,...e){let s=this.events[t]||[];for(let i=0,n=s.length;i<n;i++)s[i](...e)}on(t,e){var s;return!((s=this.events[t])===null||s===void 0)&&s.push(e)||(this.events[t]=[e]),()=>{var i;this.events[t]=(i=this.events[t])===null||i===void 0?void 0:i.filter((n=>e!==n))}}off(t,e){var s;this.events[t]=(s=this.events[t])===null||s===void 0?void 0:s.filter((i=>e!==i))}destroy(){this.events={}}}const $=100/6;class lt{constructor(t,{wheelMultiplier:e=1,touchMultiplier:s=1}){this.lastDelta={x:0,y:0},this.windowWidth=0,this.windowHeight=0,this.onTouchStart=i=>{const{clientX:n,clientY:l}=i.targetTouches?i.targetTouches[0]:i;this.touchStart.x=n,this.touchStart.y=l,this.lastDelta={x:0,y:0},this.emitter.emit("scroll",{deltaX:0,deltaY:0,event:i})},this.onTouchMove=i=>{var n,l,r,a;const{clientX:c,clientY:u}=i.targetTouches?i.targetTouches[0]:i,p=-(c-((l=(n=this.touchStart)===null||n===void 0?void 0:n.x)!==null&&l!==void 0?l:0))*this.touchMultiplier,g=-(u-((a=(r=this.touchStart)===null||r===void 0?void 0:r.y)!==null&&a!==void 0?a:0))*this.touchMultiplier;this.touchStart.x=c,this.touchStart.y=u,this.lastDelta={x:p,y:g},this.emitter.emit("scroll",{deltaX:p,deltaY:g,event:i})},this.onTouchEnd=i=>{this.emitter.emit("scroll",{deltaX:this.lastDelta.x,deltaY:this.lastDelta.y,event:i})},this.onWheel=i=>{let{deltaX:n,deltaY:l,deltaMode:r}=i;n*=r===1?$:r===2?this.windowWidth:1,l*=r===1?$:r===2?this.windowHeight:1,n*=this.wheelMultiplier,l*=this.wheelMultiplier,this.emitter.emit("scroll",{deltaX:n,deltaY:l,event:i})},this.onWindowResize=()=>{this.windowWidth=window.innerWidth,this.windowHeight=window.innerHeight},this.element=t,this.wheelMultiplier=e,this.touchMultiplier=s,this.touchStart={x:null,y:null},this.emitter=new G,window.addEventListener("resize",this.onWindowResize,!1),this.onWindowResize(),this.element.addEventListener("wheel",this.onWheel,{passive:!1}),this.element.addEventListener("touchstart",this.onTouchStart,{passive:!1}),this.element.addEventListener("touchmove",this.onTouchMove,{passive:!1}),this.element.addEventListener("touchend",this.onTouchEnd,{passive:!1})}on(t,e){return this.emitter.on(t,e)}destroy(){this.emitter.destroy(),window.removeEventListener("resize",this.onWindowResize,!1),this.element.removeEventListener("wheel",this.onWheel),this.element.removeEventListener("touchstart",this.onTouchStart),this.element.removeEventListener("touchmove",this.onTouchMove),this.element.removeEventListener("touchend",this.onTouchEnd)}}class rt{constructor({wrapper:t=window,content:e=document.documentElement,wheelEventsTarget:s=t,eventsTarget:i=s,smoothWheel:n=!0,syncTouch:l=!1,syncTouchLerp:r=.075,touchInertiaMultiplier:a=35,duration:c,easing:u=(f=>Math.min(1,1.001-Math.pow(2,-10*f))),lerp:p=.1,infinite:g=!1,orientation:m="vertical",gestureOrientation:y="vertical",touchMultiplier:z=1,wheelMultiplier:A=1,autoResize:B=!0,prevent:J,virtualScroll:Z,__experimental__naiveDimensions:tt=!1}={}){this.__isScrolling=!1,this.__isStopped=!1,this.__isLocked=!1,this.userData={},this.lastVelocity=0,this.velocity=0,this.direction=0,this.onPointerDown=f=>{f.button===1&&this.reset()},this.onVirtualScroll=f=>{if(typeof this.options.virtualScroll=="function"&&this.options.virtualScroll(f)===!1)return;const{deltaX:T,deltaY:_,event:d}=f;if(this.emitter.emit("virtual-scroll",{deltaX:T,deltaY:_,event:d}),d.ctrlKey)return;const M=d.type.includes("touch"),P=d.type.includes("wheel");if(this.isTouching=d.type==="touchstart"||d.type==="touchmove",this.options.syncTouch&&M&&d.type==="touchstart"&&!this.isStopped&&!this.isLocked)return void this.reset();const et=T===0&&_===0,it=this.options.gestureOrientation==="vertical"&&_===0||this.options.gestureOrientation==="horizontal"&&T===0;if(et||it)return;let R=d.composedPath();R=R.slice(0,R.indexOf(this.rootElement));const H=this.options.prevent;if(R.find((v=>{var k,C,O,D,I;return v instanceof Element&&(typeof H=="function"&&H?.(v)||((k=v.hasAttribute)===null||k===void 0?void 0:k.call(v,"data-lenis-prevent"))||M&&((C=v.hasAttribute)===null||C===void 0?void 0:C.call(v,"data-lenis-prevent-touch"))||P&&((O=v.hasAttribute)===null||O===void 0?void 0:O.call(v,"data-lenis-prevent-wheel"))||((D=v.classList)===null||D===void 0?void 0:D.contains("lenis"))&&!(!((I=v.classList)===null||I===void 0)&&I.contains("lenis-stopped")))})))return;if(this.isStopped||this.isLocked)return void d.preventDefault();if(!(this.options.syncTouch&&M||this.options.smoothWheel&&P))return this.isScrolling="native",void this.animate.stop();d.preventDefault();let b=_;this.options.gestureOrientation==="both"?b=Math.abs(_)>Math.abs(T)?_:T:this.options.gestureOrientation==="horizontal"&&(b=T);const st=M&&this.options.syncTouch,F=M&&d.type==="touchend"&&Math.abs(b)>5;F&&(b=this.velocity*this.options.touchInertiaMultiplier),this.scrollTo(this.targetScroll+b,Object.assign({programmatic:!1},st?{lerp:F?this.options.syncTouchLerp:1}:{lerp:this.options.lerp,duration:this.options.duration,easing:this.options.easing}))},this.onNativeScroll=()=>{if(clearTimeout(this.__resetVelocityTimeout),delete this.__resetVelocityTimeout,this.__preventNextNativeScrollEvent)delete this.__preventNextNativeScrollEvent;else if(this.isScrolling===!1||this.isScrolling==="native"){const f=this.animatedScroll;this.animatedScroll=this.targetScroll=this.actualScroll,this.lastVelocity=this.velocity,this.velocity=this.animatedScroll-f,this.direction=Math.sign(this.animatedScroll-f),this.isScrolling="native",this.emit(),this.velocity!==0&&(this.__resetVelocityTimeout=setTimeout((()=>{this.lastVelocity=this.velocity,this.velocity=0,this.isScrolling=!1,this.emit()}),400))}},window.lenisVersion="1.1.7",t&&t!==document.documentElement&&t!==document.body||(t=window),this.options={wrapper:t,content:e,wheelEventsTarget:s,eventsTarget:i,smoothWheel:n,syncTouch:l,syncTouchLerp:r,touchInertiaMultiplier:a,duration:c,easing:u,lerp:p,infinite:g,gestureOrientation:y,orientation:m,touchMultiplier:z,wheelMultiplier:A,autoResize:B,prevent:J,virtualScroll:Z,__experimental__naiveDimensions:tt},this.animate=new ot,this.emitter=new G,this.dimensions=new nt({wrapper:t,content:e,autoResize:B}),this.updateClassName(),this.userData={},this.time=0,this.velocity=this.lastVelocity=0,this.isLocked=!1,this.isStopped=!1,this.isScrolling=!1,this.targetScroll=this.animatedScroll=this.actualScroll,this.options.wrapper.addEventListener("scroll",this.onNativeScroll,!1),this.options.wrapper.addEventListener("pointerdown",this.onPointerDown,!1),this.virtualScroll=new lt(i,{touchMultiplier:z,wheelMultiplier:A}),this.virtualScroll.on("scroll",this.onVirtualScroll)}destroy(){this.emitter.destroy(),this.options.wrapper.removeEventListener("scroll",this.onNativeScroll,!1),this.options.wrapper.removeEventListener("pointerdown",this.onPointerDown,!1),this.virtualScroll.destroy(),this.dimensions.destroy(),this.cleanUpClassName()}on(t,e){return this.emitter.on(t,e)}off(t,e){return this.emitter.off(t,e)}setScroll(t){this.isHorizontal?this.rootElement.scrollLeft=t:this.rootElement.scrollTop=t}resize(){this.dimensions.resize()}emit(){this.emitter.emit("scroll",this)}reset(){this.isLocked=!1,this.isScrolling=!1,this.animatedScroll=this.targetScroll=this.actualScroll,this.lastVelocity=this.velocity=0,this.animate.stop()}start(){this.isStopped&&(this.isStopped=!1,this.reset())}stop(){this.isStopped||(this.isStopped=!0,this.animate.stop(),this.reset())}raf(t){const e=t-(this.time||t);this.time=t,this.animate.advance(.001*e)}scrollTo(t,{offset:e=0,immediate:s=!1,lock:i=!1,duration:n=this.options.duration,easing:l=this.options.easing,lerp:r=this.options.lerp,onStart:a,onComplete:c,force:u=!1,programmatic:p=!0,userData:g={}}={}){if(!this.isStopped&&!this.isLocked||u){if(typeof t=="string"&&["top","left","start"].includes(t))t=0;else if(typeof t=="string"&&["bottom","right","end"].includes(t))t=this.limit;else{let m;if(typeof t=="string"?m=document.querySelector(t):t instanceof HTMLElement&&t?.nodeType&&(m=t),m){if(this.options.wrapper!==window){const z=this.rootElement.getBoundingClientRect();e-=this.isHorizontal?z.left:z.top}const y=m.getBoundingClientRect();t=(this.isHorizontal?y.left:y.top)+this.animatedScroll}}if(typeof t=="number"&&(t+=e,t=Math.round(t),this.options.infinite?p&&(this.targetScroll=this.animatedScroll=this.scroll):t=j(0,t,this.limit),t!==this.targetScroll)){if(this.userData=g,s)return this.animatedScroll=this.targetScroll=t,this.setScroll(this.scroll),this.reset(),this.preventNextNativeScrollEvent(),this.emit(),c?.(this),void(this.userData={});p||(this.targetScroll=t),this.animate.fromTo(this.animatedScroll,t,{duration:n,easing:l,lerp:r,onStart:()=>{i&&(this.isLocked=!0),this.isScrolling="smooth",a?.(this)},onUpdate:(m,y)=>{this.isScrolling="smooth",this.lastVelocity=this.velocity,this.velocity=m-this.animatedScroll,this.direction=Math.sign(this.velocity),this.animatedScroll=m,this.setScroll(this.scroll),p&&(this.targetScroll=m),y||this.emit(),y&&(this.reset(),this.emit(),c?.(this),this.userData={},this.preventNextNativeScrollEvent())}})}}}preventNextNativeScrollEvent(){this.__preventNextNativeScrollEvent=!0,requestAnimationFrame((()=>{delete this.__preventNextNativeScrollEvent}))}get rootElement(){return this.options.wrapper===window?document.documentElement:this.options.wrapper}get limit(){return this.options.__experimental__naiveDimensions?this.isHorizontal?this.rootElement.scrollWidth-this.rootElement.clientWidth:this.rootElement.scrollHeight-this.rootElement.clientHeight:this.dimensions.limit[this.isHorizontal?"x":"y"]}get isHorizontal(){return this.options.orientation==="horizontal"}get actualScroll(){return this.isHorizontal?this.rootElement.scrollLeft:this.rootElement.scrollTop}get scroll(){return this.options.infinite?(function(e,s){return(e%s+s)%s})(this.animatedScroll,this.limit):this.animatedScroll}get progress(){return this.limit===0?1:this.scroll/this.limit}get isScrolling(){return this.__isScrolling}set isScrolling(t){this.__isScrolling!==t&&(this.__isScrolling=t,this.updateClassName())}get isStopped(){return this.__isStopped}set isStopped(t){this.__isStopped!==t&&(this.__isStopped=t,this.updateClassName())}get isLocked(){return this.__isLocked}set isLocked(t){this.__isLocked!==t&&(this.__isLocked=t,this.updateClassName())}get isSmooth(){return this.isScrolling==="smooth"}get className(){let t="lenis";return this.isStopped&&(t+=" lenis-stopped"),this.isLocked&&(t+=" lenis-locked"),this.isScrolling&&(t+=" lenis-scrolling"),this.isScrolling==="smooth"&&(t+=" lenis-smooth"),t}updateClassName(){this.cleanUpClassName(),this.rootElement.className=`${this.rootElement.className} ${this.className}`.trim()}cleanUpClassName(){this.rootElement.className=this.rootElement.className.replace(/lenis(-\w+)?/g,"").trim()}}const S=window.matchMedia("(min-width: 768px)"),h=document.getElementById("canvas"),q=h.getContext("2d");h.width=600;h.height=1067;h.style.filter="brightness(1.1)";h.style.mixBlendMode="multiply";const w=[],W=160;if(S.matches)for(let o=1;o<=W;o++){const t=new Image;t.src=`/images/danilo-360-turn/ezgif-frame-${String(o).padStart(3,"0")}.jpg`,w.push(t)}function x(o){!w[o]||!w[o].complete||(q.clearRect(0,0,h.width,h.height),q.drawImage(w[o],0,0,h.width,h.height))}const K=new rt({lerp:.1,smoothTouch:!0});K.on("scroll",L.update);E.ticker.add(o=>{K.raf(o*1e3)});E.registerPlugin(L);E.ticker.lagSmoothing(0);L.refresh();const Y=E.timeline({scrollTrigger:{trigger:"#container",start:"top top",end:S.matches?"50%":"bottom center",scrub:!0,invalidateOnRefresh:!0}});S.matches?Y.to({frame:1},{frame:W-1,ease:"none",onUpdate:function(){x(Math.floor(this.targets()[0].frame)),h.style.opacity="1"}}).to(h,{x:`+=${window.innerWidth/1.5}`,scale:1.2,ease:"easeInOut"},"<").to("#blob",{scale:.8,y:-350,ease:"none"},"<"):(E.set("#blob",{willChange:"transform"}),Y.to("#blob",{scale:10,y:200,x:"+=100",rotation:180,ease:"none"}),h.style.display="none");L.refresh();const Q=Y.scrollTrigger;function ht(){if(!S.matches)return;const o=Q?.progress??0,t=Math.floor(o*(W-1));w[t]&&w[t].complete?(x(t),h.style.opacity="1"):w[0]&&w[0].complete&&(x(0),h.style.opacity="1")}ht();S.matches&&w.forEach((o,t)=>{o.addEventListener("load",()=>{const e=Q?.progress??0,s=Math.floor(e*(W-1));t===s&&(x(t),h.style.opacity="1")})});const N=document.querySelector("h1");function at(o,t){return!(t.right<o.left||t.left>o.right||t.bottom<o.top||t.top>o.bottom)}function V(){if(!N||!S.matches)return;const o=h.getBoundingClientRect(),t=N.getBoundingClientRect();at(o,t)?(h.classList.add("invert-filter"),N.classList.add("highlighted")):(h.classList.remove("invert-filter"),N.classList.remove("highlighted"))}S.matches&&(V(),window.addEventListener("resize",V),E.ticker.add(V));S.addEventListener("change",()=>{L.getAll().forEach(o=>o.kill()),L.refresh()});const U=document.getElementById("lang-toggle");U&&U.addEventListener("click",()=>{const o=U.getAttribute("data-other-lang");o&&localStorage.setItem("portfolio-lang",o)});const X=document.getElementById("page-fade");X&&E.to(X,{opacity:0,duration:.7,ease:"power2.out",onComplete:()=>X.remove()});
